"use strict";(self.webpackChunkvoyage_vault=self.webpackChunkvoyage_vault||[]).push([[96],{96:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(861),r=n(152),l=n(687),c=n.n(l),s=n(294),o=n(250),m=n(503),i=n(170),u=n(972),d=n(167),f=n(137);const p=function(e){var t=(0,s.useRef)(null),n=e.center,a=e.zoom;return(0,s.useEffect)((function(){if(window.google){var e=new window.google.maps.Map(t.current,{center:n,zoom:a});new window.google.maps.Marker({position:n,map:e})}}),[n,a]),s.createElement("div",{ref:t,className:"map w-full h-full",style:e.style})};var E=n(197),v=n(730);const g=function(e){var t=(0,v.x)(),n=t.isLoading,l=t.error,o=t.sendRequest,g=t.clearError,h=(0,s.useContext)(E.Z),w=(0,s.useState)(!1),b=(0,r.Z)(w,2),x=b[0],N=b[1],Z=(0,s.useState)(!1),y=(0,r.Z)(Z,2),k=y[0],C=y[1],_=function(){N(!1)},D=function(){C(!1)},I=function(){var t=(0,a.Z)(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!1),t.prev=1,t.next=4,o("".concat("https://be-myfavplaces.onrender.com/api","/places/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+h.token});case 4:e.onDelete(e.id),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return s.createElement(s.Fragment,null,s.createElement(d.Z,{error:l,onClear:g}),s.createElement(u.Z,{show:x,onCancel:_,header:e.address,contentClass:"place-item__modal-content p-0",footerClass:"place-item__modal-actions text-right",footer:s.createElement(i.Z,{onClick:_},"Close")},s.createElement("div",{className:"map-container h-72 w-full"},s.createElement(p,{center:e.coordinates,zoom:16}))),s.createElement(u.Z,{show:k,onCancel:D,header:"Are you sure?",footerClass:"place-item__modal-actions",footer:s.createElement(s.Fragment,null,s.createElement(i.Z,{className:"m-1",onClick:D},"Cancel"),s.createElement(i.Z,{className:"m-1 bg-red-600",onClick:I},"Delete"))},s.createElement("p",null,"Do you really want to delete? This can't be undone.")),s.createElement("li",{className:"place-item m-2 h-full"},s.createElement(m.Z,{className:"place-item__content p-0 relative flex flex-wrap bg-white items-start flex-col"},n&&s.createElement(f.Z,{asOverlay:!0}),s.createElement("div",{className:"place-item__image w-full h-36 md:h-80"},s.createElement("img",{src:"".concat("https://be-myfavplaces.onrender.com","/").concat(e.image),alt:e.title,className:"w-full h-full object-cover"})),s.createElement("div",{className:"place-item__info p-4 text-left"},s.createElement("h2",{className:"text-xl mt-0 mr-0 mb-1 ml-0"},e.title),s.createElement("h3",{className:"text-base mt-0 mr-0 mb-1 ml-0"},e.address),s.createElement("p",{className:"text-base mt-0 mr-0 mb-1 ml-0"},e.description)),s.createElement("div",{className:"place-item__actions p-4 text-center text-sm border-t-2 border-purple w-full self-end mt-auto"},s.createElement(i.Z,{className:"m-1",inverse:!0,onClick:function(){N(!0)}},"VIEW ON MAP"),h.userId===e.creatorId&&s.createElement(s.Fragment,null,s.createElement(i.Z,{className:"m-1 bg-yellow-600 hover:bg-yellow-500",to:"/places/".concat(e.id)},"EDIT"),s.createElement(i.Z,{className:"m-1 bg-red-700 hover:bg-red-600",danger:!0,onClick:function(){C(!0)}},"DELETE"))))))},h=function(e){var t,n,a=(0,s.useContext)(E.Z);return 0===(null===(t=e.items)||void 0===t?void 0:t.length)?s.createElement("div",{className:"\n            place-list\n            list-none\n            w-full\n            m-0\n            p-4\n            self-center\n            bg-transparent\n        "},s.createElement(m.Z,{className:"rounded-none flex flex-wrap items-center justify-center w-full bg-transparent"},s.createElement("h2",{className:"text-2xl text-white text-center w-full mb-4"},"No places found. Maybe create one?"),a.isLoggedIn&&s.createElement(i.Z,{to:"/places/new"},"Add new Place"),!a.isLoggedIn&&s.createElement(i.Z,{to:"/auth"},"Login"))):s.createElement("ul",{className:"\n        place-list\n        p-8\n        list-none\n        w-full\n        grid\n        sm:grid-cols-1\n        md:grid-cols-2\n        lg:grid-cols-4\n        auto-cols-fr\n        gap-4\n    "},null===(n=e.items)||void 0===n?void 0:n.map((function(t){return s.createElement(g,{key:t.id,id:t.id,image:t.image,title:t.title,description:t.description,address:t.address,creatorId:t.creator,coordinates:t.location,onDelete:e.onDeletePlace})})))},w=n.p+"4e9f16aa8233b85105e8ea121fd2f27f.jpg",b=function(){var e=(0,s.useState)(),t=(0,r.Z)(e,2),n=t[0],l=t[1],m=(0,v.x)(),i=m.isLoading,u=(m.error,m.sendRequest),d=(m.clearError,(0,o.UO)().userId);return(0,s.useEffect)((function(){var e=function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("".concat("https://be-myfavplaces.onrender.com/api","/places/user/").concat(d),"GET");case 3:t=e.sent,l(t.places),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[u,d]),s.createElement("div",{className:"px-8 h-full min-h-screen",style:{backgroundImage:"url(".concat(w,")"),backgroundSize:"cover"}},i&&s.createElement("div",{className:"h-screen flex items-center justify-center"},s.createElement(f.Z,{asOverlay:!0})),!i&&n&&s.createElement(h,{items:n,onDeletePlace:function(e){l((function(t){return t.filter((function(t){return t.id!==e}))}))}}),!i&&!n&&s.createElement(h,{items:[]}))}},503:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(294);const r=function(e){return a.createElement("div",{className:"card ".concat(e.style," mx-auto h-full overflow-hidden rounded-lg m-0 shadow-black/25 ").concat(e.className)},e.children)}}}]);